var ls=Object.defineProperty;var is=(s,e,t)=>e in s?ls(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var G=(s,e,t)=>(is(s,typeof e!="symbol"?e+"":e,t),t);import{n as Ee,C as J,G as L,E as ns,o as as,F as os,b as p,k as F,f as g,g as T,l as O,d as w,h as f,J as He,j as E,i as K,x as _,m as _t,s as I,c as N,e as rt,Q as re,D as rs,P as Qt,R as Pt,p as us,L as Le,S as _s,U as cs,K as fs,O as xe}from"../chunks/scheduler.c405756c.js";import{S as Te,i as Ie,a as H,g as et,t as W,c as tt,b as ze,d as Ae,m as Pe,e as Se,f as ds}from"../chunks/index.19862143.js";import{w as ke}from"../chunks/index.f0c807a0.js";import{b as hs}from"../chunks/paths.014e7ae6.js";import{g as ms}from"../chunks/globals.7f7f1b26.js";import{e as Ve,u as Tt,o as Yt,d as ps}from"../chunks/each.56aa876f.js";class gs extends Error{constructor(e,t=`Unreachable case: ${e}`){super(t)}}const Zt=(s,e,t=Math.random)=>t()*(e-s)+s,It=(s,e,t=Math.random)=>Math.floor(t()*(e-s+1))+s,ut=(s,e=Math.random)=>s[It(0,s.length-1,e)],{window:vs}=ms;function ws(s){let e,t;return{c:J,l:J,m(l,n){e||(t=L(vs,"message",s[0]),e=!0)},p:J,i:J,o:J,d(l){e=!1,t()}}}const bs=6e3;function ys(s,e,t){let{host:l=typeof window<"u"&&window.parent!==window?window.parent:null}=e,{target_origin:n="*"}=e,{connect_on_mount:i=!0}=e;const o=ns(),a=m=>{l&&(l instanceof ServiceWorker||l instanceof MessagePort?l.postMessage(m):l.postMessage(m,n))};as(async()=>{i&&await D()}),os(()=>{v&&clearTimeout(v)});let r="initial",u,c,h,v;const D=async()=>l?u&&c===l?u:(c=l,u=new Promise(m=>{h=m,r="pending",a({type:"felt.connect"}),v=setTimeout(()=>{r="failure",u=void 0,v=void 0,h(!1),h=void 0},bs)})):!1,B=m=>{if(m.source!==l)return;const C=m.data;if(C){if(C.type==="felt.connected"){if(r!=="pending")return;r="success",clearTimeout(v),v=void 0,h(!0),h=void 0}C.type&&r==="success"&&o("message",C)}};return s.$$set=m=>{"host"in m&&t(1,l=m.host),"target_origin"in m&&t(2,n=m.target_origin),"connect_on_mount"in m&&t(3,i=m.connect_on_mount)},[B,l,n,i,a,D]}class ks extends Te{constructor(e){super(),Ie(this,e,ys,ws,Ee,{host:1,target_origin:2,connect_on_mount:3,post_message:4,connect:5})}get post_message(){return this.$$.ctx[4]}get connect(){return this.$$.ctx[5]}}function Es(s){let e,t,l=s[0].char+"",n;return{c(){e=p("div"),t=p("div"),n=F(l),this.h()},l(i){e=g(i,"DIV",{class:!0,style:!0});var o=T(e);t=g(o,"DIV",{class:!0});var a=T(t);n=O(a,l),a.forEach(w),o.forEach(w),this.h()},h(){f(t,"class","svelte-10gyibm"),He(t,"dead",s[0].dead),f(e,"class","item svelte-10gyibm"),E(e,"transform","translate3d("+s[3]+"px, "+s[2]+"px, 0px) scale3d("+s[5]+", "+s[5]+", "+s[5]+")"),E(e,"--grayscale",s[4]),E(e,"opacity",1-s[1])},m(i,o){K(i,e,o),_(e,t),_(t,n)},p(i,[o]){o&1&&l!==(l=i[0].char+"")&&_t(n,l),o&1&&He(t,"dead",i[0].dead),o&44&&E(e,"transform","translate3d("+i[3]+"px, "+i[2]+"px, 0px) scale3d("+i[5]+", "+i[5]+", "+i[5]+")"),o&16&&E(e,"--grayscale",i[4]),o&2&&E(e,"opacity",1-i[1])},i:J,o:J,d(i){i&&w(e)}}}function Ts(s,e,t){let l,n,i,o,a,{item:r}=e,{tile_width:u}=e,{tile_height:c}=e;return s.$$set=h=>{"item"in h&&t(0,r=h.item),"tile_width"in h&&t(6,u=h.tile_width),"tile_height"in h&&t(7,c=h.tile_height)},s.$$.update=()=>{s.$$.dirty&1&&t(1,l=r.dead?(r.age-r.dead_age)/(r.dust_age-r.dead_age):0),s.$$.dirty&3&&t(5,n=Math.min(1,r.age/r.dead_age)*Math.sqrt(1-l/4)),s.$$.dirty&3&&t(4,i=r.dead?l*100/2+"%":"0%"),s.$$.dirty&65&&t(3,o=r.x*u),s.$$.dirty&129&&t(2,a=r.y*c)},[r,l,a,o,i,n,u,c]}class Is extends Te{constructor(e){super(),Ie(this,e,Ts,Es,Ee,{item:0,tile_width:6,tile_height:7})}}function Ns(s){let e,t=s[0].char+"",l;return{c(){e=p("div"),l=F(t),this.h()},l(n){e=g(n,"DIV",{class:!0,style:!0});var i=T(e);l=O(i,t),i.forEach(w),this.h()},h(){f(e,"class","tile svelte-icdim1"),E(e,"transform","translate3d("+s[0].x*s[1]+"px, "+s[0].y*s[2]+"px, 0px)")},m(n,i){K(n,e,i),_(e,l)},p(n,[i]){i&1&&t!==(t=n[0].char+"")&&_t(l,t),i&7&&E(e,"transform","translate3d("+n[0].x*n[1]+"px, "+n[0].y*n[2]+"px, 0px)")},i:J,o:J,d(n){n&&w(e)}}}function Ds(s,e,t){let{tile:l}=e,{tile_width:n}=e,{tile_height:i}=e;return s.$$set=o=>{"tile"in o&&t(0,l=o.tile),"tile_width"in o&&t(1,n=o.tile_width),"tile_height"in o&&t(2,i=o.tile_height)},[l,n,i]}class Us extends Te{constructor(e){super(),Ie(this,e,Ds,Ns,Ee,{tile:0,tile_width:1,tile_height:2})}}function St(s,e,t){const l=s.slice();return l[12]=e[t],l}function Vt(s,e,t){const l=s.slice();return l[15]=e[t],l}function Ft(s){let e,t=[],l=new Map,n,i=Ve(s[0].tiles);const o=a=>a[15].id;for(let a=0;a<i.length;a+=1){let r=Vt(s,i,a),u=o(r);l.set(u,t[a]=Ot(u,r))}return{c(){e=p("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=g(a,"DIV",{class:!0});var r=T(e);for(let u=0;u<t.length;u+=1)t[u].l(r);r.forEach(w),this.h()},h(){f(e,"class","tiles svelte-pux4ee")},m(a,r){K(a,e,r);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);n=!0},p(a,r){r&9&&(i=Ve(a[0].tiles),et(),t=Tt(t,r,o,1,a,i,l,e,Yt,Ot,null,Vt),tt())},i(a){if(!n){for(let r=0;r<i.length;r+=1)H(t[r]);n=!0}},o(a){for(let r=0;r<t.length;r+=1)W(t[r]);n=!1},d(a){a&&w(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function Ot(s,e){let t,l,n;return l=new Us({props:{tile:e[15],tile_width:e[3],tile_height:e[3]}}),{key:s,first:null,c(){t=rt(),ze(l.$$.fragment),this.h()},l(i){t=rt(),Ae(l.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){K(i,t,o),Pe(l,i,o),n=!0},p(i,o){e=i;const a={};o&1&&(a.tile=e[15]),o&8&&(a.tile_width=e[3]),o&8&&(a.tile_height=e[3]),l.$set(a)},i(i){n||(H(l.$$.fragment,i),n=!0)},o(i){W(l.$$.fragment,i),n=!1},d(i){i&&w(t),Se(l,i)}}}function Wt(s){let e,t=[],l=new Map,n,i=Ve(s[0].items);const o=a=>a[12].id;for(let a=0;a<i.length;a+=1){let r=St(s,i,a),u=o(r);l.set(u,t[a]=Bt(u,r))}return{c(){e=p("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=g(a,"DIV",{class:!0});var r=T(e);for(let u=0;u<t.length;u+=1)t[u].l(r);r.forEach(w),this.h()},h(){f(e,"class","items svelte-pux4ee")},m(a,r){K(a,e,r);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);n=!0},p(a,r){r&9&&(i=Ve(a[0].items),et(),t=Tt(t,r,o,1,a,i,l,e,Yt,Bt,null,St),tt())},i(a){if(!n){for(let r=0;r<i.length;r+=1)H(t[r]);n=!0}},o(a){for(let r=0;r<t.length;r+=1)W(t[r]);n=!1},d(a){a&&w(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function Bt(s,e){let t,l,n;return l=new Is({props:{item:e[12],tile_width:e[3],tile_height:e[3]}}),{key:s,first:null,c(){t=rt(),ze(l.$$.fragment),this.h()},l(i){t=rt(),Ae(l.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){K(i,t,o),Pe(l,i,o),n=!0},p(i,o){e=i;const a={};o&1&&(a.item=e[12]),o&8&&(a.tile_width=e[3]),o&8&&(a.tile_height=e[3]),l.$set(a)},i(i){n||(H(l.$$.fragment,i),n=!0)},o(i){W(l.$$.fragment,i),n=!1},d(i){i&&w(t),Se(l,i)}}}function Ms(s){let e,t,l=`${s[3]}px`,n=`${s[5]}px`,i=`${s[4]}px`,o=`${s[3]}px`,a=`${s[3]}px`,r,u=s[1]&&Ft(s),c=s[2]&&Wt(s);return{c(){e=p("div"),u&&u.c(),t=I(),c&&c.c(),this.h()},l(h){e=g(h,"DIV",{class:!0});var v=T(e);u&&u.l(v),t=N(v),c&&c.l(v),v.forEach(w),this.h()},h(){f(e,"class","habitat svelte-pux4ee"),E(e,"--tile_size",l),E(e,"--habitat_width",n),E(e,"--habitat_height",i),E(e,"--tile_height",o),E(e,"--tile_width",a)},m(h,v){K(h,e,v),u&&u.m(e,null),_(e,t),c&&c.m(e,null),r=!0},p(h,[v]){h[1]?u?(u.p(h,v),v&2&&H(u,1)):(u=Ft(h),u.c(),H(u,1),u.m(e,t)):u&&(et(),W(u,1,1,()=>{u=null}),tt()),h[2]?c?(c.p(h,v),v&4&&H(c,1)):(c=Wt(h),c.c(),H(c,1),c.m(e,null)):c&&(et(),W(c,1,1,()=>{c=null}),tt()),v&8&&l!==(l=`${h[3]}px`)&&E(e,"--tile_size",l),v&32&&n!==(n=`${h[5]}px`)&&E(e,"--habitat_width",n),v&16&&i!==(i=`${h[4]}px`)&&E(e,"--habitat_height",i),v&8&&o!==(o=`${h[3]}px`)&&E(e,"--tile_height",o),v&8&&a!==(a=`${h[3]}px`)&&E(e,"--tile_width",a)},i(h){r||(H(u),H(c),r=!0)},o(h){W(u),W(c),r=!1},d(h){h&&w(e),u&&u.d(),c&&c.d()}}}function Cs(s,e,t){let l,n,i,o,a,{state:r}=e,{tiles_wide:u}=e,{tiles_tall:c}=e,{displayWidth:h}=e,{displayHeight:v}=e,{show_tiles:D=!0}=e,{show_items:B=!0}=e;return s.$$set=m=>{"state"in m&&t(0,r=m.state),"tiles_wide"in m&&t(6,u=m.tiles_wide),"tiles_tall"in m&&t(7,c=m.tiles_tall),"displayWidth"in m&&t(8,h=m.displayWidth),"displayHeight"in m&&t(9,v=m.displayHeight),"show_tiles"in m&&t(1,D=m.show_tiles),"show_items"in m&&t(2,B=m.show_items)},s.$$.update=()=>{s.$$.dirty&320&&t(11,l=Math.floor(h/u)),s.$$.dirty&640&&t(10,n=Math.floor(v/c)),s.$$.dirty&3072&&t(3,i=Math.min(l,n)),s.$$.dirty&72&&t(5,o=u*i),s.$$.dirty&136&&t(4,a=c*i)},[r,D,B,i,a,o,u,c,h,v,n,l]}class js extends Te{constructor(e){super(),Ie(this,e,Cs,Ms,Ee,{state:0,tiles_wide:6,tiles_tall:7,displayWidth:8,displayHeight:9,show_tiles:1,show_items:2})}}const Ls=(s=0)=>{let e=s;return()=>e++},Hs=(s,e,t="_")=>{const l=Ls(e);return()=>`${s}${t}${l()}`},Nt=(s,e,t,l)=>t===0||t===s-1||l===0||l===e-1,zs=(s,e,t,l)=>t>=0&&l>=0&&t<s&&l<e,Rt=[-1,0,1],As=Hs("item"),Ps=.8,Ss=s=>({tiles:Vs(s),items:Fs(s)}),Vs=s=>{const e=re(s.tiles_wide),t=re(s.tiles_tall),l=[];let n=0;for(let i=0;i<t;i++)for(let o=0;o<e;o++){const a=n;n++;let r;Nt(e,t,o,i)?r=ut(s.ocean,s.random):r=s.land_by_wetness[s.wetness],l.push({id:`${o},${i}`,x:o,y:i,index:a,char:r})}return l},Fs=s=>{const e=re(s.tiles_wide),t=re(s.tiles_tall),l=[];for(let n=0;n<t;n++)for(let i=0;i<e;i++)Nt(e,t,i,n)||Zt(0,1,s.random)<Ps||l.push(xt(s,i,n));return l},Os=s=>{const e=re(s.state),t={tiles:e.tiles,items:[]},l=re(s.tiles_wide),n=re(s.tiles_tall),{items:i}=t;for(const o of e.items){const a=o.age+1,r=!o.dead&&a>o.dead_age?!0:o.dead;if(r&&a>o.dust_age)continue;const c={...o,age:a,dead:r};if(i.push(c),!(e.items.length<=e.tiles.length)||!(!o.dead&&o.age>=o.reproduction_age)||!(Zt(0,1,s.random)<o.reproduction*re(s.reproduction)))continue;const B=ut(Rt,s.random),m=ut(Rt,s.random),C=c.x+B,z=c.y+m;if(!Nt(l,n,C,z)&&zs(l,n,C,z)&&!qt(e.items,C,z)&&!qt(i,C,z)){const A=xt(s,C,z,{char:c.char,age:0});i.push(A)}}return t},qt=(s,e,t)=>{for(const l of s)if(l.x===e&&l.y===t)return l},xt=(s,e,t,l)=>{const n=(l==null?void 0:l.age)??It(0,10,s.random),i=5,o=5,a=10;return{id:As(),x:e,y:t,dead:n>=a,dead_age:a,dust_age:a+o,reproduction:1,reproduction_age:i,...l,age:n,char:(l==null?void 0:l.char)??ut(s.trees,s.random)}},Xt=(...s)=>{let e=0,t=0,l=0,n=1;const i=s.length?s:[Date.now()];let o=Ws();e=o(" "),t=o(" "),l=o(" ");for(const r of i)e-=o(r),e<0&&(e+=1),t-=o(r),t<0&&(t+=1),l-=o(r),l<0&&(l+=1);o=null;const a=()=>{const r=2091639*e+n*23283064365386963e-26;return e=t,t=l,l=r-(n=r|0)};return a.uint32=()=>a()*4294967296,a.fract53=()=>a()+(a()*2097152|0)*11102230246251565e-32,a.version="Alea 0.9",a.seeds=i,a},Ws=()=>{let s=4022871197;return e=>{const t=e+"";for(let l=0;l<t.length;l++){s+=t.charCodeAt(l);let n=.02519603282416938*s;s=n>>>0,n-=s,n*=s,s=n>>>0,n-=s,s+=n*4294967296}return(s>>>0)*23283064365386963e-26}};class Bs{constructor(e,t,l=10,n=10){G(this,"seed",ke(1));G(this,"random",Xt(re(this.seed)));G(this,"tiles_wide");G(this,"tiles_tall");G(this,"state");G(this,"turn",ke(0));G(this,"reproduction",ke(.5));G(this,"wetness",3);G(this,"land_by_wetness",["🟧","🟨","🟫","🟩","🟦"]);G(this,"ocean",[...("🔵".repeat(4)+"🌊").repeat(8)+"🏝"]);G(this,"mountains",["⛰","🏔","🌋","🗻","🏞"]);G(this,"trees",["🌲","🌳"]);this.create_habitat_state=e,this.simulate_habitat=t,this.tiles_wide=ke(l),this.tiles_tall=ke(n),this.state=ke(this.create_habitat_state(this))}resize(e,t){this.tiles_wide.set(e),this.tiles_tall.set(t),this.reset()}setSeed(e){this.seed.set(e),this.reset()}reset(){this.random=Xt(re(this.seed)),this.state.set(this.create_habitat_state(this)),this.turn.set(0)}simulate(){this.state.set(this.simulate_habitat(this)),this.turn.update(e=>e+1)}}function Gt(s,e,t){const l=s.slice();return l[5]=e[t],l}function Jt(s,e){let t,l=e[5]+"",n,i,o,a;function r(){return e[4](e[5])}return{key:s,first:null,c(){t=p("button"),n=F(l),i=I(),this.h()},l(u){t=g(u,"BUTTON",{type:!0,class:!0});var c=T(t);n=O(c,l),i=N(c),c.forEach(w),this.h()},h(){f(t,"type","button"),f(t,"class","svelte-ey1io"),He(t,"selected",e[2].includes(e[5])),this.first=t},m(u,c){K(u,t,c),_(t,n),_(t,i),o||(a=L(t,"click",r),o=!0)},p(u,c){e=u,c&1&&l!==(l=e[5]+"")&&_t(n,l),c&5&&He(t,"selected",e[2].includes(e[5]))},d(u){u&&w(t),o=!1,a()}}}function Rs(s){let e,t=[],l=new Map,n=Ve(s[0]);const i=o=>o[5];for(let o=0;o<n.length;o+=1){let a=Gt(s,n,o),r=i(a);l.set(r,t[o]=Jt(r,a))}return{c(){e=p("fieldset");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=g(o,"FIELDSET",{class:!0});var a=T(e);for(let r=0;r<t.length;r+=1)t[r].l(a);a.forEach(w),this.h()},h(){f(e,"class","svelte-ey1io")},m(o,a){K(o,e,a);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(o,[a]){a&13&&(n=Ve(o[0]),t=Tt(t,a,i,1,o,n,l,e,ps,Jt,null,Gt))},i:J,o:J,d(o){o&&w(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function qs(s,e,t){let l,n=J,i=()=>(n(),n=rs(a,c=>t(2,l=c)),a);s.$$.on_destroy.push(()=>n());let{emojis:o}=e,{selected_emojis:a}=e;i();const r=c=>{Qt(a,l=l.includes(c)?l.filter(h=>h!==c):l.concat(c),l)},u=c=>r(c);return s.$$set=c=>{"emojis"in c&&t(0,o=c.emojis),"selected_emojis"in c&&i(t(1,a=c.selected_emojis))},[o,a,l,r,u]}class Xs extends Te{constructor(e){super(),Ie(this,e,qs,Rs,Ee,{emojis:0,selected_emojis:1})}}function Kt(s){let e,t;return e=new js({props:{state:s[16],tiles_wide:s[3],tiles_tall:s[4],displayWidth:s[13],displayHeight:s[12],show_tiles:s[7],show_items:s[8]}}),{c(){ze(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,n){Pe(e,l,n),t=!0},p(l,n){const i={};n[0]&65536&&(i.state=l[16]),n[0]&8&&(i.tiles_wide=l[3]),n[0]&16&&(i.tiles_tall=l[4]),n[0]&8192&&(i.displayWidth=l[13]),n[0]&4096&&(i.displayHeight=l[12]),n[0]&128&&(i.show_tiles=l[7]),n[0]&256&&(i.show_items=l[8]),e.$set(i)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){Se(e,l)}}}function Gs(s){let e;return{c(){e=F("play")},l(t){e=O(t,"play")},m(t,l){K(t,e,l)},d(t){t&&w(e)}}}function Js(s){let e;return{c(){e=F("pause")},l(t){e=O(t,"pause")},m(t,l){K(t,e,l)},d(t){t&&w(e)}}}function Ks(s){let e,t,l,n,i,o,a,r,u,c,h,v,D,B,m,C="tick",z,A,Ne="reset",S,te,Q,pe,R,Fe,V,De,Y,se="randomize",Ue,Z,Me,P,x,q,Oe,le,We,X,Be,ie,Re,ne,qe,$,Xe,ae,b,y,ue,ee,ct,_e,ft,de,ge,ve,dt,ht,we,be,mt,pt,he,me,Dt="about",gt,ce,Ce,Ut="source code",vt,ye,Mt="🌵",ts=`${$e}px`,Ct,st,oe,wt,j,bt,jt;Pt(s[35]);let U=s[13]>0&&Kt(s);o=new Xs({props:{emojis:s[18],selected_emojis:s[19]}});function Lt(d,k){return d[10]?Js:Gs}let lt=Lt(s),fe=lt(s);function ss(d){s[41](d)}let Ht={};return s[9]!==void 0&&(Ht.post_message=s[9]),oe=new ks({props:Ht}),us.push(()=>ds(oe,"post_message",ss)),oe.$on("message",s[42]),{c(){e=p("div"),t=p("div"),U&&U.c(),l=I(),n=p("div"),i=p("form"),ze(o.$$.fragment),a=I(),r=p("div"),u=F("turn "),c=F(s[17]),h=I(),v=p("fieldset"),D=p("button"),fe.c(),B=I(),m=p("button"),m.textContent=C,z=I(),A=p("button"),A.textContent=Ne,S=I(),te=p("fieldset"),Q=p("label"),pe=F(`seed
					`),R=p("input"),Fe=I(),V=p("input"),De=I(),Y=p("button"),Y.textContent=se,Ue=I(),Z=p("label"),Me=F(`turn duration
				`),P=p("input"),x=I(),q=p("input"),Oe=I(),le=p("label"),We=F(`reproduction rate
				`),X=p("input"),Be=I(),ie=p("input"),Re=I(),ne=p("label"),qe=F(`tiles wide
				`),$=p("input"),Xe=I(),ae=p("input"),b=I(),y=p("label"),ue=F(`tiles tall
				`),ee=p("input"),ct=I(),_e=p("input"),ft=I(),de=p("fieldset"),ge=p("label"),ve=p("input"),dt=F(`
					show tiles`),ht=I(),we=p("label"),be=p("input"),mt=F(`
					show items`),pt=I(),he=p("footer"),me=p("a"),me.textContent=Dt,gt=I(),ce=p("a"),Ce=p("div"),Ce.textContent=Ut,vt=I(),ye=p("div"),ye.textContent=Mt,st=I(),ze(oe.$$.fragment),this.h()},l(d){e=g(d,"DIV",{class:!0});var k=T(e);t=g(k,"DIV",{class:!0,style:!0});var Ge=T(t);U&&U.l(Ge),Ge.forEach(w),l=N(k),n=g(k,"DIV",{class:!0});var zt=T(n);i=g(zt,"FORM",{});var M=T(i);Ae(o.$$.fragment,M),a=N(M),r=g(M,"DIV",{class:!0});var yt=T(r);u=O(yt,"turn "),c=O(yt,s[17]),yt.forEach(w),h=N(M),v=g(M,"FIELDSET",{class:!0});var je=T(v);D=g(je,"BUTTON",{type:!0,class:!0});var At=T(D);fe.l(At),At.forEach(w),B=N(je),m=g(je,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Le(m)!=="svelte-1kws75n"&&(m.textContent=C),z=N(je),A=g(je,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Le(A)!=="svelte-1yi2hpt"&&(A.textContent=Ne),je.forEach(w),S=N(M),te=g(M,"FIELDSET",{class:!0});var it=T(te);Q=g(it,"LABEL",{class:!0});var Je=T(Q);pe=O(Je,`seed
					`),R=g(Je,"INPUT",{type:!0,step:!0,min:!0,max:!0}),Fe=N(Je),V=g(Je,"INPUT",{type:!0,class:!0}),Je.forEach(w),De=N(it),Y=g(it,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Le(Y)!=="svelte-13z5mpb"&&(Y.textContent=se),it.forEach(w),Ue=N(M),Z=g(M,"LABEL",{class:!0});var Ke=T(Z);Me=O(Ke,`turn duration
				`),P=g(Ke,"INPUT",{type:!0,step:!0,min:!0,max:!0}),x=N(Ke),q=g(Ke,"INPUT",{type:!0,class:!0}),Ke.forEach(w),Oe=N(M),le=g(M,"LABEL",{class:!0});var Qe=T(le);We=O(Qe,`reproduction rate
				`),X=g(Qe,"INPUT",{type:!0,step:!0,min:!0,max:!0}),Be=N(Qe),ie=g(Qe,"INPUT",{type:!0,class:!0}),Qe.forEach(w),Re=N(M),ne=g(M,"LABEL",{class:!0});var Ye=T(ne);qe=O(Ye,`tiles wide
				`),$=g(Ye,"INPUT",{type:!0,step:!0,min:!0,max:!0}),Xe=N(Ye),ae=g(Ye,"INPUT",{type:!0,class:!0}),Ye.forEach(w),b=N(M),y=g(M,"LABEL",{class:!0});var Ze=T(y);ue=O(Ze,`tiles tall
				`),ee=g(Ze,"INPUT",{type:!0,step:!0,min:!0,max:!0}),ct=N(Ze),_e=g(Ze,"INPUT",{type:!0,class:!0}),Ze.forEach(w),ft=N(M),de=g(M,"FIELDSET",{class:!0});var nt=T(de);ge=g(nt,"LABEL",{class:!0});var kt=T(ge);ve=g(kt,"INPUT",{type:!0}),dt=O(kt,`
					show tiles`),kt.forEach(w),ht=N(nt),we=g(nt,"LABEL",{class:!0});var Et=T(we);be=g(Et,"INPUT",{type:!0}),mt=O(Et,`
					show items`),Et.forEach(w),nt.forEach(w),pt=N(M),he=g(M,"FOOTER",{class:!0});var at=T(he);me=g(at,"A",{class:!0,href:!0,"data-svelte-h":!0}),Le(me)!=="svelte-1kzpil1"&&(me.textContent=Dt),gt=N(at),ce=g(at,"A",{href:!0,class:!0});var ot=T(ce);Ce=g(ot,"DIV",{"data-svelte-h":!0}),Le(Ce)!=="svelte-4deh8w"&&(Ce.textContent=Ut),vt=N(ot),ye=g(ot,"DIV",{"data-svelte-h":!0}),Le(ye)!=="svelte-18w2oa3"&&(ye.textContent=Mt),ot.forEach(w),at.forEach(w),M.forEach(w),zt.forEach(w),k.forEach(w),st=N(d),Ae(oe.$$.fragment,d),this.h()},h(){f(t,"class","world svelte-wfv9mu"),E(t,"--animation_duration",s[11]+"ms"),f(r,"class","turn svelte-wfv9mu"),f(D,"type","button"),f(D,"class","svelte-wfv9mu"),E(D,"flex","1"),f(m,"type","button"),f(m,"class","svelte-wfv9mu"),f(A,"type","button"),f(A,"class","svelte-wfv9mu"),f(v,"class","row svelte-wfv9mu"),f(R,"type","range"),R.value=s[14],f(R,"step",1),f(R,"min",$t),f(R,"max",es),f(V,"type","text"),V.value=s[14],f(V,"class","svelte-wfv9mu"),f(Q,"class","seed-label svelte-wfv9mu"),f(Y,"type","button"),f(Y,"class","svelte-wfv9mu"),f(te,"class","svelte-wfv9mu"),f(P,"type","range"),P.value=s[5],f(P,"step",1e3/60),f(P,"min",s[24]),f(P,"max",$s),f(q,"type","number"),q.value=s[5],f(q,"class","svelte-wfv9mu"),f(Z,"class","svelte-wfv9mu"),f(X,"type","range"),X.value=s[15],f(X,"step",.01),f(X,"min",0),f(X,"max",1),f(ie,"type","number"),ie.value=s[15],f(ie,"class","svelte-wfv9mu"),f(le,"class","svelte-wfv9mu"),f($,"type","range"),$.value=s[3],f($,"step",1),f($,"min",Qs),f($,"max",Ys),f(ae,"type","number"),ae.value=s[3],f(ae,"class","svelte-wfv9mu"),f(ne,"class","svelte-wfv9mu"),f(ee,"type","range"),ee.value=s[4],f(ee,"step",1),f(ee,"min",Zs),f(ee,"max",xs),f(_e,"type","number"),_e.value=s[4],f(_e,"class","svelte-wfv9mu"),f(y,"class","svelte-wfv9mu"),f(ve,"type","checkbox"),ve.checked=s[7],f(ge,"class","svelte-wfv9mu"),f(be,"type","checkbox"),be.checked=s[8],f(we,"class","svelte-wfv9mu"),f(de,"class","row svelte-wfv9mu"),f(me,"class","chip"),f(me,"href",hs+"/about"),E(ye,"font-size","var(--icon_size_md)"),f(ce,"href","https://github.com/feltjs/felt_habitat"),f(ce,"class","box"),f(he,"class","box svelte-wfv9mu"),E(i,"max-width",ts),f(n,"class","controls svelte-wfv9mu"),E(n,"width",s[6]?"100%":$e+"px"),E(n,"height",s[6]?s[12]+"px":"100%"),f(e,"class","universe svelte-wfv9mu"),Pt(()=>s[40].call(e)),He(e,"vertical",s[6])},m(d,k){K(d,e,k),_(e,t),U&&U.m(t,null),_(e,l),_(e,n),_(n,i),Pe(o,i,null),_(i,a),_(i,r),_(r,u),_(r,c),_(i,h),_(i,v),_(v,D),fe.m(D,null),_(v,B),_(v,m),_(v,z),_(v,A),_(i,S),_(i,te),_(te,Q),_(Q,pe),_(Q,R),_(Q,Fe),_(Q,V),_(te,De),_(te,Y),_(i,Ue),_(i,Z),_(Z,Me),_(Z,P),_(Z,x),_(Z,q),_(i,Oe),_(i,le),_(le,We),_(le,X),_(le,Be),_(le,ie),_(i,Re),_(i,ne),_(ne,qe),_(ne,$),_(ne,Xe),_(ne,ae),_(i,b),_(i,y),_(y,ue),_(y,ee),_(y,ct),_(y,_e),_(i,ft),_(i,de),_(de,ge),_(ge,ve),_(ge,dt),_(de,ht),_(de,we),_(we,be),_(we,mt),_(i,pt),_(i,he),_(he,me),_(he,gt),_(he,ce),_(ce,Ce),_(ce,vt),_(ce,ye),Ct=_s(e,s[40].bind(e)),K(d,st,k),Pe(oe,d,k),j=!0,bt||(jt=[L(window,"resize",s[35]),L(D,"click",s[36]),L(m,"click",s[37]),L(A,"click",s[38]),L(R,"input",s[29]("seed")),L(V,"input",s[28]("seed")),L(Y,"click",s[39]),L(P,"input",s[29]("turn_duration")),L(q,"input",s[29]("turn_duration")),L(X,"input",s[29]("reproduction_rate")),L(ie,"input",s[29]("reproduction_rate")),L($,"input",s[29]("tiles_wide")),L(ae,"input",s[29]("tiles_wide")),L(ee,"input",s[29]("tiles_tall")),L(_e,"input",s[29]("tiles_tall")),L(ve,"input",s[30]("show_tiles")),L(be,"input",s[30]("show_items"))],bt=!0)},p(d,k){d[13]>0?U?(U.p(d,k),k[0]&8192&&H(U,1)):(U=Kt(d),U.c(),H(U,1),U.m(t,null)):U&&(et(),W(U,1,1,()=>{U=null}),tt()),(!j||k[0]&2048)&&E(t,"--animation_duration",d[11]+"ms"),(!j||k[0]&131072)&&_t(c,d[17]),lt!==(lt=Lt(d))&&(fe.d(1),fe=lt(d),fe&&(fe.c(),fe.m(D,null))),(!j||k[0]&16384)&&(R.value=d[14]),(!j||k[0]&16384&&V.value!==d[14])&&(V.value=d[14]),(!j||k[0]&32)&&(P.value=d[5]),(!j||k[0]&32&&q.value!==d[5])&&(q.value=d[5]),(!j||k[0]&32768)&&(X.value=d[15]),(!j||k[0]&32768&&ie.value!==d[15])&&(ie.value=d[15]),(!j||k[0]&8)&&($.value=d[3]),(!j||k[0]&8&&ae.value!==d[3])&&(ae.value=d[3]),(!j||k[0]&16)&&(ee.value=d[4]),(!j||k[0]&16&&_e.value!==d[4])&&(_e.value=d[4]),(!j||k[0]&128)&&(ve.checked=d[7]),(!j||k[0]&256)&&(be.checked=d[8]),k[0]&64&&E(n,"width",d[6]?"100%":$e+"px"),k[0]&4160&&E(n,"height",d[6]?d[12]+"px":"100%"),(!j||k[0]&64)&&He(e,"vertical",d[6]);const Ge={};!wt&&k[0]&512&&(wt=!0,Ge.post_message=d[9],cs(()=>wt=!1)),oe.$set(Ge)},i(d){j||(H(U),H(o.$$.fragment,d),H(oe.$$.fragment,d),j=!0)},o(d){W(U),W(o.$$.fragment,d),W(oe.$$.fragment,d),j=!1},d(d){d&&(w(e),w(st)),U&&U.d(),Se(o),fe.d(),Ct(),Se(oe,d),bt=!1,fs(jt)}}}const $e=300,Qs=3,Ys=33,Zs=3,xs=33,$t=0,es=9999,$s=2e3;function el(s,e,t){let l,n,i,o,a,r,u,c,h,v;const D=["🌲","🌳","🌴","🌵"],B=ke(D.slice(0,2));xe(s,B,b=>t(34,c=b));let m=0,C=0,z=0,A=13,Ne=10;const S=new Bs(Ss,Os),{turn:te,state:Q,reproduction:pe,seed:R}=S;xe(s,te,b=>t(17,v=b)),xe(s,Q,b=>t(16,h=b)),xe(s,pe,b=>t(15,u=b)),xe(s,R,b=>t(14,r=b));const Fe=1e3/30;let V=1e3,De=!0,Y=!0,se=null;const Ue=()=>{x(se?{type:"habitat.stop"}:{type:"habitat.start"})},Z=()=>{se===null&&t(33,se=setInterval(()=>{S.simulate()},V))},Me=()=>{se!==null&&(clearInterval(se),t(33,se=null))};let P;const x=b=>{P({type:"Ephemera",params:b}),q(b)},q=b=>{switch(console.log("updateHabitat message",b),b.type){case"habitat.start":{Z();break}case"habitat.stop":{Me();break}case"habitat.reset":{S.reset();break}case"habitat.next_turn":{S.simulate();break}case"habitat.update_state":{const{value:y}=b;y.tiles_wide!==void 0&&t(3,A=y.tiles_wide),y.tiles_tall!==void 0&&t(4,Ne=y.tiles_tall),y.show_tiles!==void 0&&t(7,De=y.show_tiles),y.show_items!==void 0&&t(8,Y=y.show_items),y.turn_duration!==void 0&&t(5,V=y.turn_duration),y.reproduction_rate!==void 0&&Qt(pe,u=y.reproduction_rate,u),y.seed!==void 0&&S.setSeed(y.seed);break}default:throw new gs(b)}},Oe=b=>y=>{const ue=/^[\d\.]+$/u.test(y.target.value)?parseFloat(y.target.value):y.target.value,ee=Number.isNaN(ue)?y.target.value:ue;x({type:"habitat.update_state",value:{[b]:ee}})},le=b=>y=>{x({type:"habitat.update_state",value:{[b]:Number(y.target.value)}})},We=b=>y=>{x({type:"habitat.update_state",value:{[b]:y.target.checked}})},X=()=>{let b;do b=It($t,es,S.random);while(b===r);return b};function Be(){t(0,m=window.innerWidth)}const ie=()=>Ue(),Re=()=>x({type:"habitat.next_turn"}),ne=()=>x({type:"habitat.reset"}),qe=()=>x({type:"habitat.update_state",value:{seed:X()}});function $(){C=this.clientWidth,z=this.clientHeight,t(1,C),t(2,z)}function Xe(b){P=b,t(9,P)}const ae=b=>{var ue;console.log("message from window host e",b.detail),((ue=b.detail)==null?void 0:ue.data)&&q(b.detail.data)};return s.$$.update=()=>{s.$$.dirty[0]&1&&t(6,l=m<$e*2.5),s.$$.dirty[1]&8&&t(32,S.trees=c,S),s.$$.dirty[0]&24|s.$$.dirty[1]&2&&S.resize(A,Ne),s.$$.dirty[0]&66&&t(13,n=l?C:C-$e),s.$$.dirty[0]&68&&t(12,i=l?z/2:z),s.$$.dirty[0]&32&&t(11,o=Math.max(16.67,V*.95-16.67)),s.$$.dirty[0]&32&&(Me(),Z()),s.$$.dirty[1]&4&&t(10,a=se!==null)},[m,C,z,A,Ne,V,l,De,Y,P,a,o,i,n,r,u,h,v,D,B,te,Q,pe,R,Fe,Ue,x,q,Oe,le,We,X,S,se,c,Be,ie,Re,ne,qe,$,Xe,ae]}class tl extends Te{constructor(e){super(),Ie(this,e,el,Ks,Ee,{},null,[-1,-1])}}function sl(s){let e,t;return e=new tl({}),{c(){ze(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,n){Pe(e,l,n),t=!0},p:J,i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){Se(e,l)}}}class _l extends Te{constructor(e){super(),Ie(this,e,null,sl,Ee,{})}}export{_l as component};
