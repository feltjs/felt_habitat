var Cs=Object.defineProperty;var Ds=(s,e,t)=>e in s?Cs(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var G=(s,e,t)=>(Ds(s,typeof e!="symbol"?e+"":e,t),t);import{n as Me,C as J,G as V,E as Ns,o as Us,F as Ms,b as f,k as me,f as h,g as k,l as pe,d as w,h as u,J as Be,j as C,i as K,x as _,m as kt,s as E,c as I,e as bt,Q as ce,D as Vs,P as gs,R as es,p as js,L as se,S as Ls,U as zs,K as As,O as tt}from"../chunks/scheduler.34d16e1e.js";import{S as Ve,i as je,a as P,g as lt,t as H,c as it,b as He,d as Re,m as We,e as qe,f as Ps}from"../chunks/index.d22a2a6f.js";import{w as Ue}from"../chunks/index.f5084c78.js";import{b as Fs}from"../chunks/paths.3fd1c5d9.js";import{g as Ss}from"../chunks/globals.7f7f1b26.js";import{e as Xe,u as Bt,o as ws,d as Os}from"../chunks/each.f14f0ca5.js";class Bs extends Error{constructor(e,t=`Unreachable case: ${e}`){super(t)}}const bs=(s,e,t=Math.random)=>t()*(e-s)+s,Ht=(s,e,t=Math.random)=>Math.floor(t()*(e-s+1))+s,yt=(s,e=Math.random)=>s[Ht(0,s.length-1,e)],{window:Hs}=Ss;function Rs(s){let e,t;return{c:J,l:J,m(l,n){e||(t=V(Hs,"message",s[0]),e=!0)},p:J,i:J,o:J,d(l){e=!1,t()}}}const Ws=6e3;function qs(s,e,t){let{host:l=typeof window<"u"&&window.parent!==window?window.parent:null}=e,{target_origin:n="*"}=e,{connect_on_mount:i=!0}=e;const r=Ns(),a=v=>{l&&(l instanceof ServiceWorker||l instanceof MessagePort?l.postMessage(v):l.postMessage(v,n))};Us(async()=>{i&&await D()}),Ms(()=>{b&&clearTimeout(b)});let o="initial",c,d,p,b;const D=async()=>l?c&&d===l?c:(d=l,c=new Promise(v=>{p=v,o="pending",a({type:"felt.connect"}),b=setTimeout(()=>{o="failure",c=void 0,b=void 0,p(!1),p=void 0},Ws)})):!1,R=v=>{if(v.source!==l)return;const U=v.data;if(U){if(U.type==="felt.connected"){if(o!=="pending")return;o="success",clearTimeout(b),b=void 0,p(!0),p=void 0}U.type&&o==="success"&&r("message",U)}};return s.$$set=v=>{"host"in v&&t(1,l=v.host),"target_origin"in v&&t(2,n=v.target_origin),"connect_on_mount"in v&&t(3,i=v.connect_on_mount)},[R,l,n,i,a,D]}class Xs extends Ve{constructor(e){super(),je(this,e,qs,Rs,Me,{host:1,target_origin:2,connect_on_mount:3,post_message:4,connect:5})}get post_message(){return this.$$.ctx[4]}get connect(){return this.$$.ctx[5]}}function Gs(s){let e,t,l=s[0].char+"",n;return{c(){e=f("div"),t=f("div"),n=me(l),this.h()},l(i){e=h(i,"DIV",{class:!0,style:!0});var r=k(e);t=h(r,"DIV",{class:!0});var a=k(t);n=pe(a,l),a.forEach(w),r.forEach(w),this.h()},h(){u(t,"class","svelte-10gyibm"),Be(t,"dead",s[0].dead),u(e,"class","item svelte-10gyibm"),C(e,"transform","translate3d("+s[3]+"px, "+s[2]+"px, 0px) scale3d("+s[5]+", "+s[5]+", "+s[5]+")"),C(e,"--grayscale",s[4]),C(e,"opacity",1-s[1])},m(i,r){K(i,e,r),_(e,t),_(t,n)},p(i,[r]){r&1&&l!==(l=i[0].char+"")&&kt(n,l),r&1&&Be(t,"dead",i[0].dead),r&44&&C(e,"transform","translate3d("+i[3]+"px, "+i[2]+"px, 0px) scale3d("+i[5]+", "+i[5]+", "+i[5]+")"),r&16&&C(e,"--grayscale",i[4]),r&2&&C(e,"opacity",1-i[1])},i:J,o:J,d(i){i&&w(e)}}}function Js(s,e,t){let l,n,i,r,a,{item:o}=e,{tile_width:c}=e,{tile_height:d}=e;return s.$$set=p=>{"item"in p&&t(0,o=p.item),"tile_width"in p&&t(6,c=p.tile_width),"tile_height"in p&&t(7,d=p.tile_height)},s.$$.update=()=>{s.$$.dirty&1&&t(1,l=o.dead?(o.age-o.dead_age)/(o.dust_age-o.dead_age):0),s.$$.dirty&3&&t(5,n=Math.min(1,o.age/o.dead_age)*Math.sqrt(1-l/4)),s.$$.dirty&3&&t(4,i=o.dead?l*100/2+"%":"0%"),s.$$.dirty&65&&t(3,r=o.x*c),s.$$.dirty&129&&t(2,a=o.y*d)},[o,l,a,r,i,n,c,d]}class Ks extends Ve{constructor(e){super(),je(this,e,Js,Gs,Me,{item:0,tile_width:6,tile_height:7})}}function Qs(s){let e,t=s[0].char+"",l;return{c(){e=f("div"),l=me(t),this.h()},l(n){e=h(n,"DIV",{class:!0,style:!0});var i=k(e);l=pe(i,t),i.forEach(w),this.h()},h(){u(e,"class","tile svelte-icdim1"),C(e,"transform","translate3d("+s[0].x*s[1]+"px, "+s[0].y*s[2]+"px, 0px)")},m(n,i){K(n,e,i),_(e,l)},p(n,[i]){i&1&&t!==(t=n[0].char+"")&&kt(l,t),i&7&&C(e,"transform","translate3d("+n[0].x*n[1]+"px, "+n[0].y*n[2]+"px, 0px)")},i:J,o:J,d(n){n&&w(e)}}}function Ys(s,e,t){let{tile:l}=e,{tile_width:n}=e,{tile_height:i}=e;return s.$$set=r=>{"tile"in r&&t(0,l=r.tile),"tile_width"in r&&t(1,n=r.tile_width),"tile_height"in r&&t(2,i=r.tile_height)},[l,n,i]}class Zs extends Ve{constructor(e){super(),je(this,e,Ys,Qs,Me,{tile:0,tile_width:1,tile_height:2})}}function ts(s,e,t){const l=s.slice();return l[12]=e[t],l}function ss(s,e,t){const l=s.slice();return l[15]=e[t],l}function ls(s){let e,t=[],l=new Map,n,i=Xe(s[0].tiles);const r=a=>a[15].id;for(let a=0;a<i.length;a+=1){let o=ss(s,i,a),c=r(o);l.set(c,t[a]=is(c,o))}return{c(){e=f("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=h(a,"DIV",{class:!0});var o=k(e);for(let c=0;c<t.length;c+=1)t[c].l(o);o.forEach(w),this.h()},h(){u(e,"class","tiles svelte-pux4ee")},m(a,o){K(a,e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);n=!0},p(a,o){o&9&&(i=Xe(a[0].tiles),lt(),t=Bt(t,o,r,1,a,i,l,e,ws,is,null,ss),it())},i(a){if(!n){for(let o=0;o<i.length;o+=1)P(t[o]);n=!0}},o(a){for(let o=0;o<t.length;o+=1)H(t[o]);n=!1},d(a){a&&w(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function is(s,e){let t,l,n;return l=new Zs({props:{tile:e[15],tile_width:e[3],tile_height:e[3]}}),{key:s,first:null,c(){t=bt(),He(l.$$.fragment),this.h()},l(i){t=bt(),Re(l.$$.fragment,i),this.h()},h(){this.first=t},m(i,r){K(i,t,r),We(l,i,r),n=!0},p(i,r){e=i;const a={};r&1&&(a.tile=e[15]),r&8&&(a.tile_width=e[3]),r&8&&(a.tile_height=e[3]),l.$set(a)},i(i){n||(P(l.$$.fragment,i),n=!0)},o(i){H(l.$$.fragment,i),n=!1},d(i){i&&w(t),qe(l,i)}}}function ns(s){let e,t=[],l=new Map,n,i=Xe(s[0].items);const r=a=>a[12].id;for(let a=0;a<i.length;a+=1){let o=ts(s,i,a),c=r(o);l.set(c,t[a]=as(c,o))}return{c(){e=f("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=h(a,"DIV",{class:!0});var o=k(e);for(let c=0;c<t.length;c+=1)t[c].l(o);o.forEach(w),this.h()},h(){u(e,"class","items svelte-pux4ee")},m(a,o){K(a,e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);n=!0},p(a,o){o&9&&(i=Xe(a[0].items),lt(),t=Bt(t,o,r,1,a,i,l,e,ws,as,null,ts),it())},i(a){if(!n){for(let o=0;o<i.length;o+=1)P(t[o]);n=!0}},o(a){for(let o=0;o<t.length;o+=1)H(t[o]);n=!1},d(a){a&&w(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function as(s,e){let t,l,n;return l=new Ks({props:{item:e[12],tile_width:e[3],tile_height:e[3]}}),{key:s,first:null,c(){t=bt(),He(l.$$.fragment),this.h()},l(i){t=bt(),Re(l.$$.fragment,i),this.h()},h(){this.first=t},m(i,r){K(i,t,r),We(l,i,r),n=!0},p(i,r){e=i;const a={};r&1&&(a.item=e[12]),r&8&&(a.tile_width=e[3]),r&8&&(a.tile_height=e[3]),l.$set(a)},i(i){n||(P(l.$$.fragment,i),n=!0)},o(i){H(l.$$.fragment,i),n=!1},d(i){i&&w(t),qe(l,i)}}}function xs(s){let e,t,l=`${s[3]}px`,n=`${s[5]}px`,i=`${s[4]}px`,r=`${s[3]}px`,a=`${s[3]}px`,o,c=s[1]&&ls(s),d=s[2]&&ns(s);return{c(){e=f("div"),c&&c.c(),t=E(),d&&d.c(),this.h()},l(p){e=h(p,"DIV",{class:!0});var b=k(e);c&&c.l(b),t=I(b),d&&d.l(b),b.forEach(w),this.h()},h(){u(e,"class","habitat svelte-pux4ee"),C(e,"--tile_size",l),C(e,"--habitat_width",n),C(e,"--habitat_height",i),C(e,"--tile_height",r),C(e,"--tile_width",a)},m(p,b){K(p,e,b),c&&c.m(e,null),_(e,t),d&&d.m(e,null),o=!0},p(p,[b]){p[1]?c?(c.p(p,b),b&2&&P(c,1)):(c=ls(p),c.c(),P(c,1),c.m(e,t)):c&&(lt(),H(c,1,1,()=>{c=null}),it()),p[2]?d?(d.p(p,b),b&4&&P(d,1)):(d=ns(p),d.c(),P(d,1),d.m(e,null)):d&&(lt(),H(d,1,1,()=>{d=null}),it()),b&8&&l!==(l=`${p[3]}px`)&&C(e,"--tile_size",l),b&32&&n!==(n=`${p[5]}px`)&&C(e,"--habitat_width",n),b&16&&i!==(i=`${p[4]}px`)&&C(e,"--habitat_height",i),b&8&&r!==(r=`${p[3]}px`)&&C(e,"--tile_height",r),b&8&&a!==(a=`${p[3]}px`)&&C(e,"--tile_width",a)},i(p){o||(P(c),P(d),o=!0)},o(p){H(c),H(d),o=!1},d(p){p&&w(e),c&&c.d(),d&&d.d()}}}function $s(s,e,t){let l,n,i,r,a,{state:o}=e,{tiles_wide:c}=e,{tiles_tall:d}=e,{display_width:p}=e,{display_height:b}=e,{show_tiles:D=!0}=e,{show_items:R=!0}=e;return s.$$set=v=>{"state"in v&&t(0,o=v.state),"tiles_wide"in v&&t(6,c=v.tiles_wide),"tiles_tall"in v&&t(7,d=v.tiles_tall),"display_width"in v&&t(8,p=v.display_width),"display_height"in v&&t(9,b=v.display_height),"show_tiles"in v&&t(1,D=v.show_tiles),"show_items"in v&&t(2,R=v.show_items)},s.$$.update=()=>{s.$$.dirty&320&&t(11,l=Math.floor(p/c)),s.$$.dirty&640&&t(10,n=Math.floor(b/d)),s.$$.dirty&3072&&t(3,i=Math.min(l,n)),s.$$.dirty&72&&t(5,r=c*i),s.$$.dirty&136&&t(4,a=d*i)},[o,D,R,i,a,r,c,d,p,b,n,l]}class el extends Ve{constructor(e){super(),je(this,e,$s,xs,Me,{state:0,tiles_wide:6,tiles_tall:7,display_width:8,display_height:9,show_tiles:1,show_items:2})}}const tl=(s=0)=>{let e=s;return()=>e++},sl=(s,e,t="_")=>{const l=tl(e);return()=>`${s}${t}${l()}`},Rt=(s,e,t,l)=>t===0||t===s-1||l===0||l===e-1,ll=(s,e,t,l)=>t>=0&&l>=0&&t<s&&l<e,rs=[-1,0,1],il=sl("item"),nl=.8,al=s=>({tiles:rl(s),items:ol(s)}),rl=s=>{const e=ce(s.tiles_wide),t=ce(s.tiles_tall),l=[];let n=0;for(let i=0;i<t;i++)for(let r=0;r<e;r++){const a=n;n++;let o;Rt(e,t,r,i)?o=yt(s.ocean,s.random):o=s.land_by_wetness[s.wetness],l.push({id:`${r},${i}`,x:r,y:i,index:a,char:o})}return l},ol=s=>{const e=ce(s.tiles_wide),t=ce(s.tiles_tall),l=[];for(let n=0;n<t;n++)for(let i=0;i<e;i++)Rt(e,t,i,n)||bs(0,1,s.random)<nl||l.push(ys(s,i,n));return l},ul=s=>{const e=ce(s.state),t={tiles:e.tiles,items:[]},l=ce(s.tiles_wide),n=ce(s.tiles_tall),{items:i}=t;for(const r of e.items){const a=r.age+1,o=!r.dead&&a>r.dead_age?!0:r.dead;if(o&&a>r.dust_age)continue;const d={...r,age:a,dead:o};if(i.push(d),!(e.items.length<=e.tiles.length)||!(!r.dead&&r.age>=r.reproduction_age)||!(bs(0,1,s.random)<r.reproduction*ce(s.reproduction)))continue;const R=yt(rs,s.random),v=yt(rs,s.random),U=d.x+R,F=d.y+v;if(!Rt(l,n,U,F)&&ll(l,n,U,F)&&!os(e.items,U,F)&&!os(i,U,F)){const S=ys(s,U,F,{char:d.char,age:0});i.push(S)}}return t},os=(s,e,t)=>{for(const l of s)if(l.x===e&&l.y===t)return l},ys=(s,e,t,l)=>{const n=(l==null?void 0:l.age)??Ht(0,10,s.random),i=5,r=5,a=10;return{id:il(),x:e,y:t,dead:n>=a,dead_age:a,dust_age:a+r,reproduction:1,reproduction_age:i,...l,age:n,char:(l==null?void 0:l.char)??yt(s.trees,s.random)}},us=(...s)=>{let e=0,t=0,l=0,n=1;const i=s.length?s:[Date.now()];let r=_l();e=r(" "),t=r(" "),l=r(" ");for(const o of i)e-=r(o),e<0&&(e+=1),t-=r(o),t<0&&(t+=1),l-=r(o),l<0&&(l+=1);r=null;const a=()=>{const o=2091639*e+n*23283064365386963e-26;return e=t,t=l,l=o-(n=o|0)};return a.uint32=()=>a()*4294967296,a.fract53=()=>a()+(a()*2097152|0)*11102230246251565e-32,a.version="Alea 0.9",a.seeds=i,a},_l=()=>{let s=4022871197;return e=>{const t=e+"";for(let l=0;l<t.length;l++){s+=t.charCodeAt(l);let n=.02519603282416938*s;s=n>>>0,n-=s,n*=s,s=n>>>0,n-=s,s+=n*4294967296}return(s>>>0)*23283064365386963e-26}};class cl{constructor(e,t,l=10,n=10){G(this,"seed",Ue(1));G(this,"random",us(ce(this.seed)));G(this,"tiles_wide");G(this,"tiles_tall");G(this,"state");G(this,"turn",Ue(0));G(this,"reproduction",Ue(.5));G(this,"wetness",3);G(this,"land_by_wetness",["ðŸŸ§","ðŸŸ¨","ðŸŸ«","ðŸŸ©","ðŸŸ¦"]);G(this,"ocean",[...("ðŸ”µ".repeat(4)+"ðŸŒŠ").repeat(8)+"ðŸ"]);G(this,"mountains",["â›°","ðŸ”","ðŸŒ‹","ðŸ—»","ðŸž"]);G(this,"trees",["ðŸŒ²","ðŸŒ³"]);this.create_habitat_state=e,this.simulate_habitat=t,this.tiles_wide=Ue(l),this.tiles_tall=Ue(n),this.state=Ue(this.create_habitat_state(this))}resize(e,t){this.tiles_wide.set(e),this.tiles_tall.set(t),this.reset()}setSeed(e){this.seed.set(e),this.reset()}reset(){this.random=us(ce(this.seed)),this.state.set(this.create_habitat_state(this)),this.turn.set(0)}simulate(){this.state.set(this.simulate_habitat(this)),this.turn.update(e=>e+1)}}function _s(s,e,t){const l=s.slice();return l[5]=e[t],l}function cs(s,e){let t,l=e[5]+"",n,i,r,a;function o(){return e[4](e[5])}return{key:s,first:null,c(){t=f("button"),n=me(l),i=E(),this.h()},l(c){t=h(c,"BUTTON",{type:!0,class:!0});var d=k(t);n=pe(d,l),i=I(d),d.forEach(w),this.h()},h(){u(t,"type","button"),u(t,"class","svelte-ey1io"),Be(t,"selected",e[2].includes(e[5])),this.first=t},m(c,d){K(c,t,d),_(t,n),_(t,i),r||(a=V(t,"click",o),r=!0)},p(c,d){e=c,d&1&&l!==(l=e[5]+"")&&kt(n,l),d&5&&Be(t,"selected",e[2].includes(e[5]))},d(c){c&&w(t),r=!1,a()}}}function dl(s){let e,t=[],l=new Map,n=Xe(s[0]);const i=r=>r[5];for(let r=0;r<n.length;r+=1){let a=_s(s,n,r),o=i(a);l.set(o,t[r]=cs(o,a))}return{c(){e=f("fieldset");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=h(r,"FIELDSET",{class:!0});var a=k(e);for(let o=0;o<t.length;o+=1)t[o].l(a);a.forEach(w),this.h()},h(){u(e,"class","svelte-ey1io")},m(r,a){K(r,e,a);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(r,[a]){a&13&&(n=Xe(r[0]),t=Bt(t,a,i,1,r,n,l,e,Os,cs,null,_s))},i:J,o:J,d(r){r&&w(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function fl(s,e,t){let l,n=J,i=()=>(n(),n=Vs(a,d=>t(2,l=d)),a);s.$$.on_destroy.push(()=>n());let{emojis:r}=e,{selected_emojis:a}=e;i();const o=d=>{gs(a,l=l.includes(d)?l.filter(p=>p!==d):l.concat(d),l)},c=d=>o(d);return s.$$set=d=>{"emojis"in d&&t(0,r=d.emojis),"selected_emojis"in d&&i(t(1,a=d.selected_emojis))},[r,a,l,o,c]}class hl extends Ve{constructor(e){super(),je(this,e,fl,dl,Me,{emojis:0,selected_emojis:1})}}function ds(s){let e,t;return e=new el({props:{state:s[16],tiles_wide:s[3],tiles_tall:s[4],display_width:s[13],display_height:s[12],show_tiles:s[7],show_items:s[8]}}),{c(){He(e.$$.fragment)},l(l){Re(e.$$.fragment,l)},m(l,n){We(e,l,n),t=!0},p(l,n){const i={};n[0]&65536&&(i.state=l[16]),n[0]&8&&(i.tiles_wide=l[3]),n[0]&16&&(i.tiles_tall=l[4]),n[0]&8192&&(i.display_width=l[13]),n[0]&4096&&(i.display_height=l[12]),n[0]&128&&(i.show_tiles=l[7]),n[0]&256&&(i.show_items=l[8]),e.$set(i)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){qe(e,l)}}}function ml(s){let e;return{c(){e=me("play")},l(t){e=pe(t,"play")},m(t,l){K(t,e,l)},d(t){t&&w(e)}}}function pl(s){let e;return{c(){e=me("pause")},l(t){e=pe(t,"pause")},m(t,l){K(t,e,l)},d(t){t&&w(e)}}}function vl(s){let e,t,l,n,i,r,a,o,c,d,p,b,D,R,v,U="tick",F,S,Le="reset",O,x,$,ee,Ge="seed",Je,W,q,ze,j,Ae,Q,Ke="randomize",ve,A,te,nt="turn duration",Qe,le,X,Ye,B,Ze,ie,de,at="reproduction rate",xe,ne,g,T,L,$e,ge,ae,ke,Wt="tiles wide",Et,re,It,Y,Tt,oe,Ee,qt="tiles tall",Ct,ue,Dt,Z,Nt,we,Ie,Te,Ut,Mt,Ce,De,Vt,jt,be,ye,Xt="about",Lt,fe,Pe,Gt="source code",zt,Ne,Jt="ðŸŒµ",Is=`${st}px`,Kt,rt,_e,At,M,Pt,Qt;es(s[35]);let N=s[13]>0&&ds(s);r=new hl({props:{emojis:s[18],selected_emojis:s[19]}});function Yt(m,y){return m[10]?pl:ml}let ot=Yt(s),he=ot(s);function Ts(m){s[41](m)}let Zt={};return s[9]!==void 0&&(Zt.post_message=s[9]),_e=new Xs({props:Zt}),js.push(()=>Ps(_e,"post_message",Ts)),_e.$on("message",s[42]),{c(){e=f("div"),t=f("div"),N&&N.c(),l=E(),n=f("div"),i=f("form"),He(r.$$.fragment),a=E(),o=f("div"),c=me("turn "),d=me(s[17]),p=E(),b=f("fieldset"),D=f("button"),he.c(),R=E(),v=f("button"),v.textContent=U,F=E(),S=f("button"),S.textContent=Le,O=E(),x=f("fieldset"),$=f("label"),ee=f("div"),ee.textContent=Ge,Je=E(),W=f("div"),q=f("input"),ze=E(),j=f("input"),Ae=E(),Q=f("button"),Q.textContent=Ke,ve=E(),A=f("label"),te=f("div"),te.textContent=nt,Qe=E(),le=f("div"),X=f("input"),Ye=E(),B=f("input"),Ze=E(),ie=f("label"),de=f("div"),de.textContent=at,xe=E(),ne=f("div"),g=f("input"),T=E(),L=f("input"),$e=E(),ge=f("fieldset"),ae=f("label"),ke=f("div"),ke.textContent=Wt,Et=E(),re=f("input"),It=E(),Y=f("input"),Tt=E(),oe=f("label"),Ee=f("div"),Ee.textContent=qt,Ct=E(),ue=f("input"),Dt=E(),Z=f("input"),Nt=E(),we=f("fieldset"),Ie=f("label"),Te=f("input"),Ut=me(`
					show tiles`),Mt=E(),Ce=f("label"),De=f("input"),Vt=me(`
					show items`),jt=E(),be=f("footer"),ye=f("a"),ye.textContent=Xt,Lt=E(),fe=f("a"),Pe=f("div"),Pe.textContent=Gt,zt=E(),Ne=f("div"),Ne.textContent=Jt,rt=E(),He(_e.$$.fragment),this.h()},l(m){e=h(m,"DIV",{class:!0});var y=k(e);t=h(y,"DIV",{class:!0,style:!0});var et=k(t);N&&N.l(et),et.forEach(w),l=I(y),n=h(y,"DIV",{class:!0});var xt=k(n);i=h(xt,"FORM",{});var z=k(i);Re(r.$$.fragment,z),a=I(z),o=h(z,"DIV",{class:!0});var Ft=k(o);c=pe(Ft,"turn "),d=pe(Ft,s[17]),Ft.forEach(w),p=I(z),b=h(z,"FIELDSET",{class:!0});var Fe=k(b);D=h(Fe,"BUTTON",{type:!0,class:!0});var $t=k(D);he.l($t),$t.forEach(w),R=I(Fe),v=h(Fe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),se(v)!=="svelte-1kws75n"&&(v.textContent=U),F=I(Fe),S=h(Fe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),se(S)!=="svelte-1yi2hpt"&&(S.textContent=Le),Fe.forEach(w),O=I(z),x=h(z,"FIELDSET",{class:!0});var ut=k(x);$=h(ut,"LABEL",{class:!0});var _t=k($);ee=h(_t,"DIV",{class:!0,"data-svelte-h":!0}),se(ee)!=="svelte-1hqynec"&&(ee.textContent=Ge),Je=I(_t),W=h(_t,"DIV",{class:!0});var ct=k(W);q=h(ct,"INPUT",{type:!0,step:!0,min:!0,max:!0}),ze=I(ct),j=h(ct,"INPUT",{type:!0,class:!0}),ct.forEach(w),_t.forEach(w),Ae=I(ut),Q=h(ut,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),se(Q)!=="svelte-13z5mpb"&&(Q.textContent=Ke),ut.forEach(w),ve=I(z),A=h(z,"LABEL",{class:!0});var dt=k(A);te=h(dt,"DIV",{class:!0,"data-svelte-h":!0}),se(te)!=="svelte-9er5cg"&&(te.textContent=nt),Qe=I(dt),le=h(dt,"DIV",{class:!0});var ft=k(le);X=h(ft,"INPUT",{type:!0,step:!0,min:!0,max:!0}),Ye=I(ft),B=h(ft,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),ft.forEach(w),dt.forEach(w),Ze=I(z),ie=h(z,"LABEL",{class:!0});var ht=k(ie);de=h(ht,"DIV",{class:!0,"data-svelte-h":!0}),se(de)!=="svelte-5m3xox"&&(de.textContent=at),xe=I(ht),ne=h(ht,"DIV",{class:!0});var mt=k(ne);g=h(mt,"INPUT",{type:!0,step:!0,min:!0,max:!0}),T=I(mt),L=h(mt,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),mt.forEach(w),ht.forEach(w),$e=I(z),ge=h(z,"FIELDSET",{class:!0});var pt=k(ge);ae=h(pt,"LABEL",{class:!0});var Se=k(ae);ke=h(Se,"DIV",{class:!0,"data-svelte-h":!0}),se(ke)!=="svelte-vocpq7"&&(ke.textContent=Wt),Et=I(Se),re=h(Se,"INPUT",{type:!0,step:!0,min:!0,max:!0}),It=I(Se),Y=h(Se,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),Se.forEach(w),Tt=I(pt),oe=h(pt,"LABEL",{class:!0});var Oe=k(oe);Ee=h(Oe,"DIV",{class:!0,"data-svelte-h":!0}),se(Ee)!=="svelte-cra6hn"&&(Ee.textContent=qt),Ct=I(Oe),ue=h(Oe,"INPUT",{type:!0,step:!0,min:!0,max:!0}),Dt=I(Oe),Z=h(Oe,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),Oe.forEach(w),pt.forEach(w),Nt=I(z),we=h(z,"FIELDSET",{class:!0});var vt=k(we);Ie=h(vt,"LABEL",{class:!0});var St=k(Ie);Te=h(St,"INPUT",{type:!0}),Ut=pe(St,`
					show tiles`),St.forEach(w),Mt=I(vt),Ce=h(vt,"LABEL",{class:!0});var Ot=k(Ce);De=h(Ot,"INPUT",{type:!0}),Vt=pe(Ot,`
					show items`),Ot.forEach(w),vt.forEach(w),jt=I(z),be=h(z,"FOOTER",{class:!0});var gt=k(be);ye=h(gt,"A",{class:!0,href:!0,"data-svelte-h":!0}),se(ye)!=="svelte-1kzpil1"&&(ye.textContent=Xt),Lt=I(gt),fe=h(gt,"A",{href:!0,class:!0});var wt=k(fe);Pe=h(wt,"DIV",{"data-svelte-h":!0}),se(Pe)!=="svelte-4deh8w"&&(Pe.textContent=Gt),zt=I(wt),Ne=h(wt,"DIV",{"data-svelte-h":!0}),se(Ne)!=="svelte-18w2oa3"&&(Ne.textContent=Jt),wt.forEach(w),gt.forEach(w),z.forEach(w),xt.forEach(w),y.forEach(w),rt=I(m),Re(_e.$$.fragment,m),this.h()},h(){u(t,"class","world svelte-wfv9mu"),C(t,"--animation_duration",s[11]+"ms"),u(o,"class","turn svelte-wfv9mu"),u(D,"type","button"),u(D,"class","svelte-wfv9mu"),C(D,"flex","1"),u(v,"type","button"),u(v,"class","svelte-wfv9mu"),u(S,"type","button"),u(S,"class","svelte-wfv9mu"),u(b,"class","row svelte-wfv9mu"),u(ee,"class","title"),u(q,"type","range"),q.value=s[14],u(q,"step",1),u(q,"min",ks),u(q,"max",Es),u(j,"type","text"),j.value=s[14],u(j,"class","svelte-wfv9mu"),u(W,"class","row"),u($,"class","seed-label svelte-wfv9mu"),u(Q,"type","button"),u(Q,"class","svelte-wfv9mu"),u(x,"class","svelte-wfv9mu"),u(te,"class","title"),u(X,"type","range"),X.value=s[5],u(X,"step",1e3/60),u(X,"min",s[24]),u(X,"max",vs),u(B,"type","number"),B.value=s[5],u(B,"step",1e3/60),u(B,"min",s[24]),u(B,"max",vs),u(B,"class","svelte-wfv9mu"),u(le,"class","row"),u(A,"class","svelte-wfv9mu"),u(de,"class","title"),u(g,"type","range"),g.value=s[15],u(g,"step",.01),u(g,"min",0),u(g,"max",1),u(L,"type","number"),L.value=s[15],u(L,"step",.01),u(L,"min",0),u(L,"max",1),u(L,"class","svelte-wfv9mu"),u(ne,"class","row"),u(ie,"class","svelte-wfv9mu"),u(ke,"class","title"),u(re,"type","range"),re.value=s[3],u(re,"step",1),u(re,"min",fs),u(re,"max",hs),u(Y,"type","number"),Y.value=s[3],u(Y,"step",1),u(Y,"min",fs),u(Y,"max",hs),u(Y,"class","svelte-wfv9mu"),u(ae,"class","svelte-wfv9mu"),u(Ee,"class","title"),u(ue,"type","range"),ue.value=s[4],u(ue,"step",1),u(ue,"min",ms),u(ue,"max",ps),u(Z,"type","number"),Z.value=s[4],u(Z,"step",1),u(Z,"min",ms),u(Z,"max",ps),u(Z,"class","svelte-wfv9mu"),u(oe,"class","svelte-wfv9mu"),u(ge,"class","row svelte-wfv9mu"),u(Te,"type","checkbox"),Te.checked=s[7],u(Ie,"class","svelte-wfv9mu"),u(De,"type","checkbox"),De.checked=s[8],u(Ce,"class","svelte-wfv9mu"),u(we,"class","row svelte-wfv9mu"),u(ye,"class","chip"),u(ye,"href",Fs+"/about"),C(Ne,"font-size","var(--icon_size_md)"),u(fe,"href","https://github.com/feltjs/felt_habitat"),u(fe,"class","box"),u(be,"class","box svelte-wfv9mu"),C(i,"max-width",Is),u(n,"class","controls svelte-wfv9mu"),C(n,"width",s[6]?"100%":st+"px"),C(n,"height",s[6]?s[12]+"px":"100%"),u(e,"class","universe svelte-wfv9mu"),es(()=>s[40].call(e)),Be(e,"vertical",s[6])},m(m,y){K(m,e,y),_(e,t),N&&N.m(t,null),_(e,l),_(e,n),_(n,i),We(r,i,null),_(i,a),_(i,o),_(o,c),_(o,d),_(i,p),_(i,b),_(b,D),he.m(D,null),_(b,R),_(b,v),_(b,F),_(b,S),_(i,O),_(i,x),_(x,$),_($,ee),_($,Je),_($,W),_(W,q),_(W,ze),_(W,j),_(x,Ae),_(x,Q),_(i,ve),_(i,A),_(A,te),_(A,Qe),_(A,le),_(le,X),_(le,Ye),_(le,B),_(i,Ze),_(i,ie),_(ie,de),_(ie,xe),_(ie,ne),_(ne,g),_(ne,T),_(ne,L),_(i,$e),_(i,ge),_(ge,ae),_(ae,ke),_(ae,Et),_(ae,re),_(ae,It),_(ae,Y),_(ge,Tt),_(ge,oe),_(oe,Ee),_(oe,Ct),_(oe,ue),_(oe,Dt),_(oe,Z),_(i,Nt),_(i,we),_(we,Ie),_(Ie,Te),_(Ie,Ut),_(we,Mt),_(we,Ce),_(Ce,De),_(Ce,Vt),_(i,jt),_(i,be),_(be,ye),_(be,Lt),_(be,fe),_(fe,Pe),_(fe,zt),_(fe,Ne),Kt=Ls(e,s[40].bind(e)),K(m,rt,y),We(_e,m,y),M=!0,Pt||(Qt=[V(window,"resize",s[35]),V(D,"click",s[36]),V(v,"click",s[37]),V(S,"click",s[38]),V(q,"input",s[29]("seed")),V(j,"input",s[28]("seed")),V(Q,"click",s[39]),V(X,"input",s[29]("turn_duration")),V(B,"input",s[29]("turn_duration")),V(g,"input",s[29]("reproduction_rate")),V(L,"input",s[29]("reproduction_rate")),V(re,"input",s[29]("tiles_wide")),V(Y,"input",s[29]("tiles_wide")),V(ue,"input",s[29]("tiles_tall")),V(Z,"input",s[29]("tiles_tall")),V(Te,"input",s[30]("show_tiles")),V(De,"input",s[30]("show_items"))],Pt=!0)},p(m,y){m[13]>0?N?(N.p(m,y),y[0]&8192&&P(N,1)):(N=ds(m),N.c(),P(N,1),N.m(t,null)):N&&(lt(),H(N,1,1,()=>{N=null}),it()),(!M||y[0]&2048)&&C(t,"--animation_duration",m[11]+"ms"),(!M||y[0]&131072)&&kt(d,m[17]),ot!==(ot=Yt(m))&&(he.d(1),he=ot(m),he&&(he.c(),he.m(D,null))),(!M||y[0]&16384)&&(q.value=m[14]),(!M||y[0]&16384&&j.value!==m[14])&&(j.value=m[14]),(!M||y[0]&32)&&(X.value=m[5]),(!M||y[0]&32&&B.value!==m[5])&&(B.value=m[5]),(!M||y[0]&32768)&&(g.value=m[15]),(!M||y[0]&32768&&L.value!==m[15])&&(L.value=m[15]),(!M||y[0]&8)&&(re.value=m[3]),(!M||y[0]&8&&Y.value!==m[3])&&(Y.value=m[3]),(!M||y[0]&16)&&(ue.value=m[4]),(!M||y[0]&16&&Z.value!==m[4])&&(Z.value=m[4]),(!M||y[0]&128)&&(Te.checked=m[7]),(!M||y[0]&256)&&(De.checked=m[8]),y[0]&64&&C(n,"width",m[6]?"100%":st+"px"),y[0]&4160&&C(n,"height",m[6]?m[12]+"px":"100%"),(!M||y[0]&64)&&Be(e,"vertical",m[6]);const et={};!At&&y[0]&512&&(At=!0,et.post_message=m[9],zs(()=>At=!1)),_e.$set(et)},i(m){M||(P(N),P(r.$$.fragment,m),P(_e.$$.fragment,m),M=!0)},o(m){H(N),H(r.$$.fragment,m),H(_e.$$.fragment,m),M=!1},d(m){m&&(w(e),w(rt)),N&&N.d(),qe(r),he.d(),Kt(),qe(_e,m),Pt=!1,As(Qt)}}}const st=300,fs=3,hs=33,ms=3,ps=33,ks=0,Es=9999,vs=2e3;function gl(s,e,t){let l,n,i,r,a,o,c,d,p,b;const D=["ðŸŒ²","ðŸŒ³","ðŸŒ´","ðŸŒµ"],R=Ue(D.slice(0,2));tt(s,R,g=>t(34,d=g));let v=0,U=0,F=0,S=13,Le=10;const O=new cl(al,ul),{turn:x,state:$,reproduction:ee,seed:Ge}=O;tt(s,x,g=>t(17,b=g)),tt(s,$,g=>t(16,p=g)),tt(s,ee,g=>t(15,c=g)),tt(s,Ge,g=>t(14,o=g));const Je=1e3/30;let W=1e3,q=!0,ze=!0,j=null;const Ae=()=>{A(j?{type:"habitat.stop"}:{type:"habitat.start"})},Q=()=>{j===null&&t(33,j=setInterval(()=>{O.simulate()},W))},Ke=()=>{j!==null&&(clearInterval(j),t(33,j=null))};let ve;const A=g=>{ve({type:"Ephemera",params:g}),te(g)},te=g=>{switch(console.log("updateHabitat message",g),g.type){case"habitat.start":{Q();break}case"habitat.stop":{Ke();break}case"habitat.reset":{O.reset();break}case"habitat.next_turn":{O.simulate();break}case"habitat.update_state":{const{value:T}=g;T.tiles_wide!==void 0&&t(3,S=T.tiles_wide),T.tiles_tall!==void 0&&t(4,Le=T.tiles_tall),T.show_tiles!==void 0&&t(7,q=T.show_tiles),T.show_items!==void 0&&t(8,ze=T.show_items),T.turn_duration!==void 0&&t(5,W=T.turn_duration),T.reproduction_rate!==void 0&&gs(ee,c=T.reproduction_rate,c),T.seed!==void 0&&O.setSeed(T.seed);break}default:throw new Bs(g)}},nt=g=>T=>{const L=/^[\d\.]+$/u.test(T.target.value)?parseFloat(T.target.value):T.target.value,$e=Number.isNaN(L)?T.target.value:L;A({type:"habitat.update_state",value:{[g]:$e}})},Qe=g=>T=>{A({type:"habitat.update_state",value:{[g]:Number(T.target.value)}})},le=g=>T=>{A({type:"habitat.update_state",value:{[g]:T.target.checked}})},X=()=>{let g;do g=Ht(ks,Es,O.random);while(g===o);return g};function Ye(){t(0,v=window.innerWidth)}const B=()=>Ae(),Ze=()=>A({type:"habitat.next_turn"}),ie=()=>A({type:"habitat.reset"}),de=()=>A({type:"habitat.update_state",value:{seed:X()}});function at(){U=this.clientWidth,F=this.clientHeight,t(1,U),t(2,F)}function xe(g){ve=g,t(9,ve)}const ne=g=>{var L;console.log("message from window host e",g.detail),((L=g.detail)==null?void 0:L.data)&&te(g.detail.data)};return s.$$.update=()=>{s.$$.dirty[0]&1&&t(6,l=v<st*2.5),s.$$.dirty[1]&8&&t(32,O.trees=d,O),s.$$.dirty[0]&24|s.$$.dirty[1]&2&&O.resize(S,Le),s.$$.dirty[0]&66&&t(13,n=l?U:U-st),s.$$.dirty[0]&68&&t(12,i=l?F/2:F),s.$$.dirty[0]&32&&t(11,r=Math.max(16.67,W*.95-16.67)),s.$$.dirty[0]&32&&(Ke(),Q()),s.$$.dirty[1]&4&&t(10,a=j!==null)},[v,U,F,S,Le,W,l,q,ze,ve,a,r,i,n,o,c,p,b,D,R,x,$,ee,Ge,Je,Ae,A,te,nt,Qe,le,X,O,j,d,Ye,B,Ze,ie,de,at,xe,ne]}class wl extends Ve{constructor(e){super(),je(this,e,gl,vl,Me,{},null,[-1,-1])}}function bl(s){let e,t;return e=new wl({}),{c(){He(e.$$.fragment)},l(l){Re(e.$$.fragment,l)},m(l,n){We(e,l,n),t=!0},p:J,i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){qe(e,l)}}}class Nl extends Ve{constructor(e){super(),je(this,e,null,bl,Me,{})}}export{Nl as component};
